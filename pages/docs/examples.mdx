# Examples

Real-world code examples you can copy and adapt.

import { Tabs, Tab, Steps, Callout } from 'nextra/components'

## Complete Feature Module

A fully-featured user management module following all conventions.

<Steps>

### Directory Structure

```
features/users/
├── components/
│   ├── UserCard.tsx
│   ├── UserForm.tsx
│   └── UserList.tsx
├── hooks/
│   ├── useUsers.ts
│   └── useCreateUser.ts
├── services/
│   └── userService.ts
├── stores/
│   └── userFiltersStore.ts
├── types/
│   └── user.types.ts
└── index.ts
```

### Types

```typescript
// types/user.types.ts
export interface User {
  id: string;
  email: string;
  name: string;
  role: 'admin' | 'user';
  createdAt: string;
}

export interface CreateUserDTO {
  email: string;
  name: string;
  role: 'admin' | 'user';
}

export interface UserFilters {
  search?: string;
  role?: 'admin' | 'user';
}
```

### Service

```typescript
// services/userService.ts
import { apiClient } from '@/lib/apiClient';
import type { User, CreateUserDTO, UserFilters } from '../types/user.types';

export const userService = {
  getUsers: async (filters?: UserFilters): Promise<User[]> => {
    const { data } = await apiClient.get('/users', { params: filters });
    return data;
  },

  getUser: async (id: string): Promise<User> => {
    const { data } = await apiClient.get(`/users/${id}`);
    return data;
  },

  createUser: async (dto: CreateUserDTO): Promise<User> => {
    const { data } = await apiClient.post('/users', dto);
    return data;
  },

  deleteUser: async (id: string): Promise<void> => {
    await apiClient.delete(`/users/${id}`);
  },
};
```

### Query Hooks

```typescript
// hooks/useUsers.ts
import { useQuery } from '@tanstack/react-query';
import { userService } from '../services/userService';
import type { UserFilters } from '../types/user.types';

export const useUsers = (filters?: UserFilters) => {
  return useQuery({
    queryKey: ['users', filters],
    queryFn: () => userService.getUsers(filters),
  });
};

// hooks/useCreateUser.ts
import { useMutation, useQueryClient } from '@tanstack/react-query';
import { toast } from 'sonner';
import { userService } from '../services/userService';

export const useCreateUser = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: userService.createUser,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['users'] });
      toast.success('User created successfully');
    },
    onError: () => {
      toast.error('Failed to create user');
    },
  });
};
```

### Components

```typescript
// components/UserCard.tsx
import { memo, type FC } from 'react';
import { cn } from '@/lib/utils';
import type { User } from '../types/user.types';

interface UserCardProps {
  user: User;
  onSelect?: (user: User) => void;
  className?: string;
}

export const UserCard: FC<UserCardProps> = memo(({
  user,
  onSelect,
  className,
}) => {
  return (
    <div
      className={cn(
        'rounded-lg border p-4 cursor-pointer hover:border-orange-500',
        className
      )}
      onClick={() => onSelect?.(user)}
    >
      <h3 className="font-semibold">{user.name}</h3>
      <p className="text-sm text-gray-500">{user.email}</p>
      <span className="mt-2 inline-block rounded-full bg-gray-100 px-2 py-1 text-xs">
        {user.role}
      </span>
    </div>
  );
});

UserCard.displayName = 'UserCard';
```

### Public API

```typescript
// index.ts
export { UserCard } from './components/UserCard';
export { UserForm } from './components/UserForm';
export { UserList } from './components/UserList';
export { useUsers, useUser } from './hooks/useUsers';
export { useCreateUser } from './hooks/useCreateUser';
export type { User, CreateUserDTO, UserFilters } from './types/user.types';
```

</Steps>

---

## Form with Validation

<Tabs items={['Component', 'Schema', 'Usage']}>
  <Tab>
```typescript
// components/LoginForm.tsx
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { loginSchema, type LoginFormData } from './loginSchema';

interface LoginFormProps {
  onSubmit: (data: LoginFormData) => Promise<void>;
}

export const LoginForm: FC<LoginFormProps> = ({ onSubmit }) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<LoginFormData>({
    resolver: zodResolver(loginSchema),
  });

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
      <div>
        <label htmlFor="email" className="block text-sm font-medium">
          Email
        </label>
        <input
          id="email"
          type="email"
          {...register('email')}
          className="mt-1 block w-full rounded-lg border px-3 py-2"
        />
        {errors.email && (
          <p className="mt-1 text-sm text-red-500">{errors.email.message}</p>
        )}
      </div>

      <div>
        <label htmlFor="password" className="block text-sm font-medium">
          Password
        </label>
        <input
          id="password"
          type="password"
          {...register('password')}
          className="mt-1 block w-full rounded-lg border px-3 py-2"
        />
        {errors.password && (
          <p className="mt-1 text-sm text-red-500">{errors.password.message}</p>
        )}
      </div>

      <button
        type="submit"
        disabled={isSubmitting}
        className="w-full rounded-lg bg-orange-500 py-2 text-white hover:bg-orange-600 disabled:opacity-50"
      >
        {isSubmitting ? 'Signing in...' : 'Sign In'}
      </button>
    </form>
  );
};
```
  </Tab>
  <Tab>
```typescript
// loginSchema.ts
import { z } from 'zod';

export const loginSchema = z.object({
  email: z
    .string()
    .min(1, 'Email is required')
    .email('Invalid email address'),
  password: z
    .string()
    .min(1, 'Password is required')
    .min(8, 'Password must be at least 8 characters'),
});

export type LoginFormData = z.infer<typeof loginSchema>;
```
  </Tab>
  <Tab>
```typescript
// pages/login.tsx
import { LoginForm } from '@/features/auth';
import { useAuth } from '@/features/auth';

export default function LoginPage() {
  const { login } = useAuth();

  const handleSubmit = async (data: LoginFormData) => {
    await login(data.email, data.password);
  };

  return (
    <div className="mx-auto max-w-md p-8">
      <h1 className="mb-6 text-2xl font-bold">Sign In</h1>
      <LoginForm onSubmit={handleSubmit} />
    </div>
  );
}
```
  </Tab>
</Tabs>

---

## Data Table with Filtering

```typescript
import { useState, useMemo } from 'react';
import { useUsers } from '@/features/users';

export const UsersTable = () => {
  const [search, setSearch] = useState('');
  const [roleFilter, setRoleFilter] = useState<string>('all');

  const { data: users, isLoading } = useUsers();

  const filteredUsers = useMemo(() => {
    if (!users) return [];

    return users.filter((user) => {
      const matchesSearch = user.name.toLowerCase().includes(search.toLowerCase());
      const matchesRole = roleFilter === 'all' || user.role === roleFilter;
      return matchesSearch && matchesRole;
    });
  }, [users, search, roleFilter]);

  if (isLoading) return <TableSkeleton />;

  return (
    <div>
      <div className="mb-4 flex gap-4">
        <input
          type="text"
          placeholder="Search users..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="rounded-lg border px-3 py-2"
        />
        <select
          value={roleFilter}
          onChange={(e) => setRoleFilter(e.target.value)}
          className="rounded-lg border px-3 py-2"
        >
          <option value="all">All Roles</option>
          <option value="admin">Admin</option>
          <option value="user">User</option>
        </select>
      </div>

      <table className="w-full">
        <thead>
          <tr className="border-b">
            <th className="py-2 text-left">Name</th>
            <th className="py-2 text-left">Email</th>
            <th className="py-2 text-left">Role</th>
          </tr>
        </thead>
        <tbody>
          {filteredUsers.map((user) => (
            <tr key={user.id} className="border-b">
              <td className="py-2">{user.name}</td>
              <td className="py-2">{user.email}</td>
              <td className="py-2">{user.role}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};
```

---

## Modal with Portal

```typescript
import { createPortal } from 'react-dom';
import { useEffect, useRef, type FC, type ReactNode } from 'react';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  children: ReactNode;
}

export const Modal: FC<ModalProps> = ({ isOpen, onClose, title, children }) => {
  const overlayRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') onClose();
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = '';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return createPortal(
    <div
      ref={overlayRef}
      className="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
      onClick={(e) => e.target === overlayRef.current && onClose()}
    >
      <div
        role="dialog"
        aria-modal="true"
        aria-labelledby="modal-title"
        className="w-full max-w-md rounded-lg bg-white p-6 shadow-xl"
      >
        <div className="mb-4 flex items-center justify-between">
          <h2 id="modal-title" className="text-lg font-semibold">
            {title}
          </h2>
          <button
            onClick={onClose}
            aria-label="Close"
            className="rounded p-1 hover:bg-gray-100"
          >
            ✕
          </button>
        </div>
        {children}
      </div>
    </div>,
    document.body
  );
};
```
